
<header class="text-gray-300 text-3xl p-5 bg-transparent ">
  <div class=" grid p-2 sm:p-5 grid-cols-2">
    <!-- Logo or Name -->
    <div class="flex items-center">
      <span class="font-bold text-4xl">
        <div class="flex items-center gap-4">
          <img class="w-12 h-12 rounded-full border border-white/10" src="/img/avatar_josue.png" alt="Josue Avatar">
          <div class="font-medium text-white">
              <div class="animated-text hidden sm:flex">Josue Nolasco</div>
              <div class="animated-text flex sm:hidden">JN</div>
              <div class="hidden sm:flex text-sm text-gray-400">Tegucigalpa, Honduras</div>
          </div>
        </div>
      </span>
    </div>

    <!-- Hamburger Menu for Small Screens -->
    <div class="lg:hidden flex items-center justify-end">
      <button id="menu-btn" class="text-gray-300 focus:outline-none hover:text-rose-500 transition-colors">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Desktop Navigation -->
    <nav class="w-full hidden lg:flex items-center text-base justify-end">
      <a href="/" id="firstLink" class="nav-link mr-5 px-4 py-2">Sobre mí</a>
      <a href="/proyects" id="secondLink" class="nav-link mr-5 px-4 py-2">Mis proyectos</a>
      <a href="/projects/certificates" id="thirdLink" class="nav-link mr-5 px-4 py-2">Mis diplomas</a>
      <a href="/abilities" id="fourthLink" class="nav-link mr-5 px-4 py-2">Habilidades</a>
    </nav>
  </div>

  <!-- Sidebar Menu for Small Screens -->
  <div id="sidebar" class="fixed inset-0 bg-gray-900/95 backdrop-blur-md z-50 hidden transform -translate-x-full transition-transform duration-500 ease-in-out">
    <div class="flex flex-col items-center justify-center h-full space-y-8 text-gray-300 text-2xl">
      <a href="/" id="firstLink-mobile" class="mobile-nav-link">Sobre mí</a>
      <a href="/proyects" id="secondLink-mobile" class="mobile-nav-link">Mis proyectos</a>
      <a href="/projects/certificates" id="thirdLink-mobile" class="mobile-nav-link">Mis diplomas</a>
      <a href="/abilities" id="fourthLink-mobile" class="mobile-nav-link">Habilidades</a>

      <button id="close-btn" class="text-rose-500 border border-rose-500/50 px-8 py-2 rounded-full focus:outline-none mt-10 hover:bg-rose-500 hover:text-white transition-all">
        Cerrar
      </button>
    </div>
  </div>
</header>

<script>
  const links = document.querySelectorAll('.nav-link');
  const sidebarLinks = document.querySelectorAll('.mobile-nav-link');

  function setActiveLinks() {
    const currentPath = window.location.pathname;
    
    // Map paths to base IDs
    const pathMap = {
      '/': 'firstLink',
      '/proyects': 'secondLink',
      '/projects/certificates': 'thirdLink',
      '/abilities': 'fourthLink'
    };

    const activeBaseId = pathMap[currentPath] || localStorage.getItem('activeLinkId') || 'firstLink';

    links.forEach(link => {
      if (link.id === activeBaseId) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });

    sidebarLinks.forEach(link => {
      if (link.id.startsWith(activeBaseId)) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
  }

  // Initial set
  setActiveLinks();

  // Event listeners for links
  [...links, ...sidebarLinks].forEach(link => {
    link.addEventListener('click', (e) => {
      const target = e.currentTarget as HTMLElement;
      const baseId = target.id.replace('-mobile', '');
      localStorage.setItem('activeLinkId', baseId);
    });
  });

  // Mobile menu logic
  const menuBtn = document.getElementById('menu-btn');
  const sidebar = document.getElementById('sidebar');
  const closeBtn = document.getElementById('close-btn');

  menuBtn?.addEventListener('click', () => {
    sidebar?.classList.remove('hidden');
    setTimeout(() => {
      sidebar?.classList.remove('-translate-x-full');
    }, 10);
  });

  closeBtn?.addEventListener('click', () => {
    sidebar?.classList.add('-translate-x-full');
    setTimeout(() => {
      sidebar?.classList.add('hidden');
    }, 500);
  });
</script>

<style>
  .nav-link {
    @apply transition-all duration-300 ease-in-out text-gray-300 hover:text-rose-500;
  }
  
  .nav-link.active {
    @apply text-rose-500 border-b-2 border-rose-500;
  }

  .mobile-nav-link {
    @apply transition-all duration-300 ease-in-out text-gray-300 hover:text-rose-500;
  }

  .mobile-nav-link.active {
    @apply text-rose-500 font-bold;
  }

  .animated-text {
    background: linear-gradient(to right, #f43f5e, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% auto;
    animation: text-shine 4s linear infinite;
  }

  @keyframes text-shine {
    to {
      background-position: 200% center;
    }
  }
</style>